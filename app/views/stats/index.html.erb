<% content_for(:html_title) { 'Stats' } %>

<h1>Statistics</h1>
<%
  response = Net::HTTP.get(URI.parse("#{ENV["MEILISEARCH_ROOT_URL"]}/stats"), {"Authorization" => "Bearer #{ENV["MEILISEARCH_TOKEN"]}"});
  data = JSON.parse(response)
  indexes = data["indexes"]
%>
<table>
  <tr>
    <th>Item</th>
    <th>Count</th>
  </tr>
  <tr>
    <td>Files</td>
    <td><%=indexes["driver"]["numberOfDocuments"] %></td>
  </tr>
  <tr>
    <td>Systems</td>
    <td><%=indexes["system"]["numberOfDocuments"] %></td>
  </tr>
  <tr>
    <td>Devices</td>
    <td><%=indexes["device"]["numberOfDocuments"] %></td>
  </tr>
</table>
